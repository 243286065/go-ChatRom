<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>注册界面</title>
    <link rel="import" href="common.html"/>

    <script>
        function register() {
            // 提交表单
            var username = document.getElementById('username');
            var password = document.getElementById('password');
            var password_again = document.getElementById('password_again');

            if (username.value.length < 5 || username.value.length > 12) {
                alert("账户长度必须为5~12位");
            } else if (password.value.length < 8 || password.value.length > 20) {
                alert("密码长度必须为5~12位");
            } else if (password.value != password_again.value) {
                alert("两次输入的密码不一致！");
            } else {
                $.ajax({
                    url: "/user/signup",
                    type: "POST",
                    data: {
                        "username": username.value,
                        "password": password.value,
                    },
                    error: function (err) {
                        alert(JSON.stringify(err));
                    },
                    success: function (resp) {
                        if (resp.Code == 10000) {
                        alert("注册成功");
                            window.location.href = "/user/signin";
                        } else {
                            alert(resp.Message);
                        }
                    }
                });
            }
        }
    </script>
</head>


<body>
<!-- 注册表单 -->
    <form style="margin-left:500px;margin-top:200px;">
        <div><h1>用户注册</h1></div><br/>
        <div class="form-group">
            <label for="user" stype="display:inline;">账    户：</label>
            <input type="text" class="form-control" id="username" style="display:inline;width:200px;" autocomplete="off" />
        </div>
        <div class="form-group">
            <label for="password" style="display:inline;">密    码：</label>
            <input type="text" class="form-control" id="password" style="display:inline;width:200px;" autocomplete="off" />
        </div>
        <div class="form-group">
            <label for="password" style="display:inline;">确认密码：</label>
            <input type="text" class="form-control" id="password_again" style="display:inline;width:200px;" autocomplete="off" />
        </div>
        <input type=button class="btn btn-primary" value=确认注册 onclick="register()">
    </form>
</body>
</html>